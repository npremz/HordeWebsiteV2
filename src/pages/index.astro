---
import Layout from '../layouts/Layout.astro';
import BackgroundCanvas from '../components/ui/BackgroundCanvas.astro';
import HeroSection from '../components/sections/HeroSection.astro';
import MethodSection from '../components/sections/MethodSection.astro';
import ExperienceSection from '../components/sections/ExperienceSection.astro';
import ServiceSection from '../components/sections/ServiceSection.astro';
import Footer from '../components/Footer.astro';
import { createReader } from '@keystatic/core/reader';
import keystaticConfig from '../../keystatic.config';

const reader = createReader(process.cwd(), keystaticConfig);
const siteSettings = await reader.singletons.siteSettings.read();

const title = siteSettings?.homepageTitle || 'Horde';
const description = siteSettings?.defaultDescription || 'Agence web spécialisée en performance et UX.';
---

<Layout
  title={title}
  description={description}
  siteNameAsPrefix={true}
>
  <BackgroundCanvas triggerDistance={500} topOffset={1100} bottomOffset={500} stopTargetId="services-section" />

  <HeroSection
    titleLine1="Nous\nconcevons"
    titleLine2="des"
    titleLine3="interfaces\nultra rapides"
    ctaLabel="Notre methode"
  />

  <div id="page-content">
    <section class="pt-128">
      <MethodSection
        title="<span>Nos 03</span><span>méthodes</span>"
        stepsCount="03"
        steps={[
          'Eliminer les frictions pénalisantes',
          'Maximiser les conversions',
          'Soigner l\'expérience utilisateur',
        ]}
      />
    </section>
  </div>
  <div id="white-section" class="full-bleed-bg">
    <ExperienceSection
      label="Nous créons des interfaces intuitives qui répondent aux intentions des utilisateurs."
      text="<span>Le design<br>attire,</span><span>l\'expérience<br>retient.</span>"
    />
    <section id="services-section" class="mt-24 sm:mt-32 lg:mt-96">
      <ServiceSection />
    </section>
  </div>

<style>
  .full-bleed-bg {
    position: relative;
  }
  .full-bleed-bg::before {
    content: '';
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 100vw;
    height: 100%;
    background-color: var(--color-bg-light);
    z-index: -1;
  }
</style>
  <Footer />
</Layout>
