---
import Layout from '../../layouts/Layout.astro';
import ContactForm from '../../components/ui/ContactForm';
import Wrapped from '../../components/ui/Wrapped.astro';
import Footer from '../../components/Footer.astro';
import { SUPPORTED_LOCALES, type Locale, useTranslations } from '../../i18n';

export const prerender = true;

export function getStaticPaths() {
  return SUPPORTED_LOCALES.map((lang) => ({
    params: { lang },
  }));
}

const { lang } = Astro.params as { lang: Locale };
const t = useTranslations(lang);
---

<style>
	.contact-link {
		position: relative;
		display: inline-block;
		border-bottom: 1px solid rgba(177, 177, 177, 0.5);
	}

	.contact-link::after {
		content: '';
		position: absolute;
		bottom: -1px;
		left: 0;
		width: 100%;
		height: 1px;
		background-color: currentColor;
		transform: scaleX(0);
		transform-origin: left center;
		transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
	}

	.contact-link:hover::after {
		transform: scaleX(1);
	}
</style>

<Layout lang={lang} title={t.contact.title} variant="dark" description={t.contact.description}>
	<div id="page-content">
		<div class="mt-40 sm:mt-50 lg:mt-80 xl:mt-96 flex flex-col md:flex-row md:justify-between md:items-start gap-10 sm:gap-16">
			<div class="flex flex-col gap-4 sm:gap-8 shrink-0">
				<div class="section-label">{t.contact.knockKnock}</div>
				<h1 class="font-display uppercase leading-none text-[1.5rem] sm:text-[2rem] md:text-[3.125rem] max-w-[350px] sm:max-w-[485px]">{t.contact.startWhen.replace(/\n/g, ' ')}</h1>
			</div>
			<div class="flex flex-col gap-4 sm:gap-8 text-right">
				<div class="section-label">{t.contact.alternativeContacts}</div>
				<ul class="flex flex-col gap-2.5 text-[1.25rem] sm:text-[1.5rem]">
					<li><a href="mailto:hello@hordeagence.com" class="contact-link">hello@hordeagence.com</a></li>
					<li><a href="https://calendly.com/ni-premont/30min" class="contact-link">{t.contact.bookCall}</a></li>
				</ul>
				<button class="cursor-pointer scroll-to-btn ml-auto" data-scroll-target="#contact-form" data-scroll-offset="-100"><Wrapped variant='dark' class="font-mono text-bg-light text-[1rem]">â†“</Wrapped></button>
			</div>
		</div>
		<hr class="mt-8 sm:mt-16 md:mt-24 border-lines-dark" />

		<div id="contact-form">
			<ContactForm client:load translations={t.form} />
		</div>
	</div>

	<Footer lang={lang} variant="dark" hideOverflow={false} />
</Layout>

<script>
	function initScrollButtons() {
		const scrollButtons = document.querySelectorAll('.scroll-to-btn');

		scrollButtons.forEach(btn => {
			btn.addEventListener('click', () => {
				const target = btn.getAttribute('data-scroll-target');
				const offset = Number(btn.getAttribute('data-scroll-offset')) || 0;
				if (target && (window as any).lenis) {
					(window as any).lenis.scrollTo(target, { duration: 1.2, offset });
				}
			});
		});
	}

	initScrollButtons();
	document.addEventListener('astro:after-swap', initScrollButtons);
</script>
