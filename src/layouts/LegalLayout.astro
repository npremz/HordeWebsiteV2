---
import Layout from './Layout.astro';
import Footer from '../components/Footer.astro';
import Line from '../components/ui/Line.astro';
import { DEFAULT_LOCALE, type Locale, useTranslations } from '../i18n';

interface Props {
  lang?: Locale;
	title: string;
	description: string;
  updatedAt: string;
}

const { lang = DEFAULT_LOCALE, title, description, updatedAt } = Astro.props;
const t = useTranslations(lang);
---

<Layout
  lang={lang}
  title={title}
  description={description}
>
  <div class="relative mt-32 sm:mt-40 lg:mt-64 xl:mt-80">
    <!-- Decorative background element -->
    <div class="absolute -top-32 left-1/2 -translate-x-1/2 -z-10 w-full max-w-7xl opacity-10 pointer-events-none">
      <svg viewBox="0 0 1000 1000" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="500" cy="500" r="499.5" stroke="currentColor" />
        <circle cx="500" cy="500" r="250" stroke="currentColor" />
      </svg>
    </div>

    <header class="mb-16 sm:mb-24 lg:mb-32">
      <div class="flex flex-col md:flex-row md:items-end justify-between gap-8">
        <div class="max-w-4xl">
          <span class="section-label mb-8 block">{t.legal.label}</span>
          <h1 class="heading-display text-4xl sm:text-6xl lg:text-7xl">
            {title}
          </h1>
        </div>
        <div class="md:text-right">
          <p class="section-label text-lines-dark">{t.legal.lastUpdate}</p>
          <p class="font-mono text-xl">{updatedAt}</p>
        </div>
      </div>
    </header>

    <Line />

    <div class="lg:grid lg:grid-cols-12 gap-16 mt-16 sm:mt-24 mb-32">
      <aside class="hidden lg:block lg:col-span-3">
        <div class="sticky top-32">
          <p class="section-label mb-8">Navigation</p>
          <ul class="space-y-4 font-mono text-sm uppercase">
            <li><a href={`/${lang}/mentions-legales`} class="link-hover">{t.legal.mentionsLegales}</a></li>
            <li><a href={`/${lang}/confidentialite`} class="link-hover">{t.legal.confidentialite}</a></li>
            <li><a href={`/${lang}/cookies`} class="link-hover">{t.legal.cookies}</a></li>
          </ul>
        </div>
      </aside>

      <article class="lg:col-span-9 max-w-4xl">
        <slot />
      </article>
    </div>

    <Line />
    
    <div class="mt-16 mb-32">
      <a
        href={`/${lang}`}
        class="section-label link-hover flex items-center gap-2"
      >
        <span>←</span> {t.legal.backHome}
      </a>
    </div>
  </div>
  <Footer lang={lang} hideOverflow={false} />
</Layout>

<style is:global>
  @reference "../styles/global.css";

  /* Basic styling for the content within the slot */
  article section h2 {
    font-family: var(--font-display);
    @apply uppercase leading-[1.2] text-[1.625rem] mb-8 mt-24 first:mt-0;
  }

  @media (min-width: 640px) {
    article section h2 {
      @apply text-4xl;
    }
  }

  @media (min-width: 1512px) {
    article section h2 {
      @apply text-5xl;
    }
  }

  @media (min-width: 1920px) {
    article section h2 {
      @apply text-[3.5rem];
    }
  }
  
  article section h3 {
    font-family: var(--font-display);
    @apply uppercase text-2xl mb-6 mt-12;
  }
  
  article section p {
    @apply text-lg sm:text-xl leading-relaxed mb-8 text-lines-dark;
  }
  
  article section ul {
    @apply list-none space-y-6 mb-10;
  }
  
  article section li {
    @apply text-lg sm:text-xl text-lines-dark flex gap-4;
  }
  
  article section li::before {
    content: "—";
    @apply text-black shrink-0;
  }
  
  article section a {
    @apply border-b border-lines hover:border-black transition-colors;
  }
  
  article section strong {
    @apply text-black font-medium;
  }
</style>
